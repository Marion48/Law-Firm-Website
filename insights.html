<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Insights — Byron N. & Co. Advocates | Nairobi, Kenya</title>
  <meta name="description" content="Legal insights and articles on corporate, commercial, litigation, and real estate law by Byron Nyasimi Advocates.">
  <link rel="icon" href="images/logo.png" />
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- NAV -->
<header class="nav" role="banner">
  <div class="container nav-inner">
   <a class="brand brand-combo" href="index.html">
  <img src="images/logo.png" alt="Firm Logo" class="logo">
  <span>Byron N. & Co. Advocates</span>
</a>
    <button id="mobile-toggle" class="hamburger" aria-label="Open navigation" aria-expanded="false">☰</button>
    <nav id="main-nav" role="navigation" aria-label="Main Navigation">
      <ul>
        <li><a href="index.html#home">Home</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#services">Practice Areas</a></li>
        <li><a href="index.html#team">Team</a></li>
        <li><a href="insights.html"class="active">Insights</a></li>
        <li><a href="index.html#contact">Contact</a></li>
      </ul>
    </nav>
  </div>
</header>

<main>
  <section class="hero">
    <div class="hero-bg" style="background-image:url('images/Blue.png');" aria-hidden="true"></div>
    <div class="container hero-content">
      <div class="hero-left animate-up">
        <div h1="highlights" aria-hidden="false">
        <h1>Insights & Articles</h1>
        <p class="lead">Expert commentary on legal issues, cases and best practice from  Byron N. & Co. Advocates.</p>
      </div>
    </div>
  </section>

  <section class="section container animate-up">
    <h2></h2>
    <div id="all-insights" class="blog-grid">
      <!-- JS will populate from content.json -->
    </div>
    <!-- Place Orwoba insight HTML here (static content) -->
      <!--
     <article class="post-card">
  <a href="https://www.linkedin.com/pulse/defamation-digital-speech-lessons-from-orwoba-case-byron-nyasimi-cecre/" class="insight-link" target="_blank" rel="noopener noreferrer">
    <div class="blog-img">
      <img src="images/insight-cover.jpg" alt="Cover image for DEFAMATION & DIGITAL SPEECH: LESSONS FROM THE ORWOBA CASE">
    </div>
    <div class="post-content">
      <h3>DEFAMATION & DIGITAL SPEECH: LESSONS FROM THE ORWOBA CASE</h3>
      <p>Key legal insights into defamation and digital speech from the Orwoba ruling.</p>
      <a href="https://www.linkedin.com/pulse/defamation-digital-speech-lessons-from-orwoba-case-byron-nyasimi-cecre/" class="read-article">Read Article</a>
    </div>
  </a>
</article>
    -->
  </section>
 
</main>

<!-- Footer -->
<footer class="main-footer">
  <div class="footer-content">
    <!-- Services on the LEFT -->
    <div class="footer-links">
      <h4>Services</h4>
      <a href="litigation-dispute-resolution.html">Litigation & Dispute Resolution</a>
      <a href="intellectual-property.html">Intellectual Property</a>
      <a href="Commercial and corporate law.html">Commercial & Corporate Law</a>
      <a href="Constitutional and Human Rights Law.html">Constitutional and Human Rights Law</a>
      <a href="conveyancing.html">Conveyancing</a>
      <a href="Criminal Litigation.html">Criminal Litigation</a>
      <a href="Entertainment.html">Entertainment</a>
      <a href="Compensation & Liability Matters.html">Compensation & Liability Matters</a>
    </div>
    
    <!-- Connect on the RIGHT -->
    <div class="footer-links">
      <h4>Connect</h4>
      <a href="mailto:marioncherono55@gmail.com">marioncherono55@gmail.com</a>
      <a href="tel:+254707146880">+254 707 146 880</a>
      <p>Westlands Square, Nairobi, Kenya</p>
    </div>
  </div>
  
 <!-- Footer bottom -->
<div class="footer-bottom" style="text-align: center !important; width: 100%; margin: 40px auto 0 auto; padding-top: 40px; border-top: 1px solid rgba(255,255,255,0.1);">
  <p style="text-align: center !important; margin: 0 auto !important; display: block !important;">© <span id="yr">2025</span> Byron N. & Co. Advocates. All rights reserved.</p>
</div>

<script src="main.js" defer></script>
<script>
// ===== LOAD ALL INSIGHTS FOR INSIGHTS PAGE =====
async function loadAllInsights() {
  const container = document.getElementById("all-insights");
  if (!container) return;

  try {
    console.log("Loading all insights for insights page...");
    
    // Show loading state
    container.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
        <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 1rem;"></i>
        <p>Loading insights...</p>
      </div>
    `;

    const response = await fetch("/api/insights", {
      method: "POST",
      headers: { 
        "Content-Type": "application/json",
        "Accept": "application/json"
      },
      body: JSON.stringify({ action: "get" })
    });

    if (!response.ok) {
      throw new Error(`API error: ${response.status}`);
    }

    const insights = await response.json();
    console.log(`Loaded ${insights.length} insights for insights page`);

    // Filter to show only published insights
    const publishedInsights = insights.filter(insight => 
      insight.status === 'published'
    );
    
    // Sort by date (newest first)
    publishedInsights.sort((a, b) => {
      const dateA = new Date(a.date || a.createdAt || 0);
      const dateB = new Date(b.date || b.createdAt || 0);
      return dateB - dateA;
    });

    if (publishedInsights.length === 0) {
      container.innerHTML = `
        <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
          <p>No insights published yet. Check back soon!</p>
        </div>
      `;
      return;
    }

    // Render ALL published insights
    container.innerHTML = publishedInsights.map(insight => {
      const imageUrl = insight.image || '/images/default-insight.jpg';
      const excerpt = insight.excerpt || 'Read more about this legal insight...';
      const date = insight.date || insight.createdAt || '';
      const url = insight.url || `/insight/${insight.slug}`;
      
      return `
        <article class="post-card">
          <a href="${url}">
            <div class="blog-img">
              <img src="${imageUrl}" alt="${insight.title || 'Insight'}" loading="lazy" 
                   onerror="this.src='/images/default-insight.jpg'">
            </div>
            <div class="post-content">
              <h3>${insight.title || 'Untitled Insight'}</h3>
              <p>${excerpt.substring(0, 150)}${excerpt.length > 150 ? '...' : ''}</p>
              <div class="post-meta">
                ${date ? `<span class="post-date">${formatDate(date)}</span>` : ''}
                <span class="read-article">Read Article →</span>
              </div>
            </div>
          </a>
        </article>
      `;
    }).join("");
    
  } catch (err) {
    console.error("Failed to load insights:", err);
    container.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #666;">
        <p>Unable to load insights. Please check your connection.</p>
        <button onclick="loadAllInsights()" style="margin-top: 10px; padding: 8px 16px; background: var(--navy); color: white; border: none; border-radius: 4px; cursor: pointer;">
          Retry
        </button>
      </div>
    `;
  }
}

function formatDate(dateString) {
  if (!dateString) return '';
  try {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  } catch (error) {
    return dateString;
  }
}

// Load insights when page loads
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', loadAllInsights);
} else {
  loadAllInsights();
}
</script>
</body>
</html>
 